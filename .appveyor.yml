version: 1.0.{build}

os:
  - Visual Studio 2015
platform: 
- Win32

install:
  - cd win
  - appveyor DownloadFile https://sourceforge.net/projects/omlx/files/raqm/raqm-dep-win23-debug-29-12-2016.zip
  - ps: Start-FileDownload 'https://github.com/robotology/ycm/releases/download/v0.2.2/YCM-0.2.2-win32.msi'
  - 7z x raqm-dep-win23-debug-29-12-2016.zip
  - cd ..
  
build:

build_script:
  # build the library 
  - cmake -DUNIT_TEST=1 -DWANT_DEBUG=1 -DSTATIC_LIB=1
  # build the library for Release and Debug
  - cmake --build . --config Debug 
  - ctest -C "Debug"
  
after_build:
  # Install only release 
  #- cmd: cmake --build C:\dev\lib-template-cmake\build --config Release --target INSTALL

# For some reason, tests are not working. Debug this and enable them again
# test_script:
#   - cmd: ctest -C Release -VV
